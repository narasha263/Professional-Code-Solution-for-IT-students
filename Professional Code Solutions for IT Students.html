<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CodeCraft Pro - Premium Code Solutions</title>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        body {
            box-sizing: border-box;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .status-pending { background-color: #fbbf24; color: #92400e; }
        .status-in-progress { background-color: #60a5fa; color: #1e40af; }
        .status-completed { background-color: #34d399; color: #065f46; }
        .status-cancelled { background-color: #f87171; color: #991b1b; }
        .payment-pending { background-color: #fbbf24; color: #92400e; }
        .payment-paid { background-color: #34d399; color: #065f46; }
        .payment-failed { background-color: #f87171; color: #991b1b; }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="min-h-full bg-gray-50"><!-- Navigation -->
  <nav class="bg-white shadow-lg sticky top-0 z-50">
   <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-16">
     <div class="flex items-center space-x-3">
      <div class="w-10 h-10 gradient-bg rounded-lg flex items-center justify-center">
       <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
       </svg>
      </div>
      <h1 id="platform-title" class="text-xl font-bold text-gray-900">CodeCraft Pro</h1>
     </div>
     <div class="flex items-center space-x-6"><button id="nav-services" class="text-gray-700 hover:text-blue-600 font-medium">Services</button> <button id="nav-projects" class="text-gray-700 hover:text-blue-600 font-medium">My Projects</button> <button id="nav-admin" class="text-gray-700 hover:text-blue-600 font-medium">Admin</button> <button id="nav-order" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">Order Now</button>
     </div>
    </div>
   </div>
  </nav><!-- Hero Section -->
  <section id="hero-section" class="gradient-bg text-white py-20">
   <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
    <h2 id="hero-title" class="text-5xl font-bold mb-6">Professional Code Solutions for IT Students</h2>
    <p class="text-xl mb-8 max-w-3xl mx-auto">Get custom HTML, CSS, JavaScript, and full-stack projects built by expert developers. Perfect for assignments, portfolios, and learning.</p>
    <div class="flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-6 mb-8">
     <div class="bg-white bg-opacity-20 px-6 py-3 rounded-lg"><span id="pricing-text" class="text-2xl font-bold">₹1500 per project</span>
     </div>
     <div class="text-lg"><span class="block">✓ Any technology stack</span> <span class="block">✓ Complete source code</span>
     </div>
    </div><button id="hero-cta" class="bg-white text-blue-600 px-8 py-4 rounded-lg text-lg font-semibold hover:bg-gray-100 transition-colors">Start Your Project</button>
   </div>
  </section><!-- Services Section -->
  <section id="services-section" class="py-16 bg-white">
   <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-12">
     <h3 class="text-3xl font-bold text-gray-900 mb-4">What We Build</h3>
     <p class="text-lg text-gray-600">Professional code solutions for every IT student need</p>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
     <div class="card-hover bg-gray-50 p-6 rounded-xl">
      <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4">
       <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
       </svg>
      </div>
      <h4 class="text-xl font-semibold mb-3">Frontend Projects</h4>
      <p class="text-gray-600">Responsive websites, landing pages, portfolios, and interactive web applications using HTML, CSS, and JavaScript.</p>
     </div>
     <div class="card-hover bg-gray-50 p-6 rounded-xl">
      <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4">
       <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"></path>
       </svg>
      </div>
      <h4 class="text-xl font-semibold mb-3">Database Projects</h4>
      <p class="text-gray-600">Complete database-driven applications with CRUD operations, user management, and data visualization.</p>
     </div>
     <div class="card-hover bg-gray-50 p-6 rounded-xl">
      <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4">
       <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
       </svg>
      </div>
      <h4 class="text-xl font-semibold mb-3">Full-Stack Solutions</h4>
      <p class="text-gray-600">End-to-end applications with frontend, backend, database integration, and API development.</p>
     </div>
     <div class="card-hover bg-gray-50 p-6 rounded-xl">
      <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mb-4">
       <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
       </svg>
      </div>
      <h4 class="text-xl font-semibold mb-3">Mobile-First Design</h4>
      <p class="text-gray-600">Responsive designs that work perfectly on all devices, from mobile phones to desktop computers.</p>
     </div>
     <div class="card-hover bg-gray-50 p-6 rounded-xl">
      <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center mb-4">
       <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
       </svg>
      </div>
      <h4 class="text-xl font-semibold mb-3">Performance Optimized</h4>
      <p class="text-gray-600">Fast-loading, SEO-friendly code with best practices for performance and accessibility.</p>
     </div>
     <div class="card-hover bg-gray-50 p-6 rounded-xl">
      <div class="w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center mb-4">
       <svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
       </svg>
      </div>
      <h4 class="text-xl font-semibold mb-3">Quality Assurance</h4>
      <p class="text-gray-600">Thoroughly tested code with documentation, comments, and deployment instructions included.</p>
     </div>
    </div>
   </div>
  </section><!-- Order Form Section -->
  <section id="order-section" class="py-16 bg-gray-50 hidden">
   <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="bg-white rounded-xl shadow-lg p-8">
     <h3 class="text-2xl font-bold text-gray-900 mb-6 text-center">Order Your Custom Project</h3>
     <form id="order-form" class="space-y-6">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
       <div><label for="student-name" class="block text-sm font-medium text-gray-700 mb-2">Full Name *</label> <input type="text" id="student-name" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
       </div>
       <div><label for="student-email" class="block text-sm font-medium text-gray-700 mb-2">Email Address *</label> <input type="email" id="student-email" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
       </div>
       <div><label for="student-phone" class="block text-sm font-medium text-gray-700 mb-2">Phone Number *</label> <input type="tel" id="student-phone" required placeholder="+254700000000" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
       </div>
      </div>
      <div><label for="project-title" class="block text-sm font-medium text-gray-700 mb-2">Project Title *</label> <input type="text" id="project-title" required placeholder="e.g., E-commerce Website, Student Management System" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
      </div>
      <div><label for="project-description" class="block text-sm font-medium text-gray-700 mb-2">Project Description *</label> <textarea id="project-description" rows="5" required placeholder="Describe your project requirements, features needed, design preferences, and any specific functionality..." class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"></textarea>
      </div>
      <div><label for="technologies" class="block text-sm font-medium text-gray-700 mb-2">Preferred Technologies</label> <input type="text" id="technologies" placeholder="e.g., HTML, CSS, JavaScript, React, Node.js, MySQL" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
      </div>
      <div><label for="deadline" class="block text-sm font-medium text-gray-700 mb-2">Preferred Deadline</label> <input type="date" id="deadline" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
      </div>
      <div class="bg-blue-50 p-6 rounded-lg">
       <div class="flex items-center justify-between mb-4"><span class="text-lg font-semibold text-gray-900">Project Cost</span> <span class="text-2xl font-bold text-blue-600">KSh 1500</span>
       </div>
       <div class="text-sm text-gray-600 space-y-1 mb-4">
        <p>✓ Complete source code with documentation</p>
        <p>✓ Responsive design for all devices</p>
        <p>✓ 7 days of free support after delivery</p>
        <p>✓ Deployment instructions included</p>
       </div>
       <div class="border-t pt-4">
        <h4 class="font-semibold text-gray-900 mb-3">M-Pesa Payment Instructions</h4>
        <div class="bg-green-50 p-4 rounded-lg text-sm">
         <p class="font-medium text-green-800 mb-2">Pay via M-Pesa Paybill:</p>
         <div class="space-y-1 text-green-700">
          <p>1. Go to M-Pesa menu</p>
          <p>2. Select "Lipa na M-Pesa"</p>
          <p>3. Select "Pay Bill"</p>
          <p>4. Enter Business No: <span id="paybill-display" class="font-bold">522533</span></p>
          <p>5. Account No: Your phone number</p>
          <p>6. Amount: KSh 1500</p>
          <p>7. Enter your M-Pesa PIN</p>
         </div>
        </div>
       </div>
      </div>
      <div><label for="mpesa-code" class="block text-sm font-medium text-gray-700 mb-2">M-Pesa Transaction Code *</label> <input type="text" id="mpesa-code" required placeholder="e.g., QGH7X8Y9Z0" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
       <p class="text-xs text-gray-500 mt-1">Enter the M-Pesa confirmation code you received after payment</p>
      </div>
      <div class="flex items-center space-x-3"><input type="checkbox" id="terms-agree" required class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"> <label for="terms-agree" class="text-sm text-gray-700">I agree to the terms and conditions and understand that payment is required before project development begins.</label>
      </div><button type="submit" id="submit-order" class="w-full bg-blue-600 text-white py-4 rounded-lg text-lg font-semibold hover:bg-blue-700 transition-colors"> Submit Project Request </button>
     </form>
    </div>
   </div>
  </section><!-- Projects Dashboard -->
  <section id="projects-section" class="py-16 bg-white hidden">
   <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center mb-8">
     <h3 class="text-2xl font-bold text-gray-900">My Projects</h3>
     <div class="text-sm text-gray-500">
      Total Projects: <span id="total-projects">0</span>
     </div>
    </div>
    <div id="projects-list" class="space-y-6">
     <div class="text-center py-12 text-gray-500">
      <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
      </svg>
      <p class="text-lg">No projects yet</p>
      <p class="text-sm">Submit your first project request to get started!</p>
     </div>
    </div>
   </div>
  </section><!-- Admin Panel -->
  <section id="admin-section" class="py-16 bg-gray-50 hidden">
   <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center mb-8">
     <h3 class="text-2xl font-bold text-gray-900">Admin Dashboard</h3>
     <div class="flex space-x-4 text-sm">
      <div class="bg-white px-4 py-2 rounded-lg shadow"><span class="text-gray-500">Total Projects:</span> <span id="admin-total-projects" class="font-bold ml-2">0</span>
      </div>
      <div class="bg-white px-4 py-2 rounded-lg shadow"><span class="text-gray-500">Pending Payment:</span> <span id="admin-pending-payment" class="font-bold ml-2 text-orange-600">0</span>
      </div>
      <div class="bg-white px-4 py-2 rounded-lg shadow"><span class="text-gray-500">In Progress:</span> <span id="admin-in-progress" class="font-bold ml-2 text-blue-600">0</span>
      </div>
     </div>
    </div><!-- Admin Actions -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
     <div class="bg-white p-6 rounded-lg shadow">
      <h4 class="text-lg font-semibold mb-4">Quick Actions</h4>
      <div class="space-y-3"><button id="notify-admin" class="w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors"> Send Admin Notification </button> <button id="export-projects" class="w-full bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 transition-colors"> Export Project Data </button> <button id="bulk-update" class="w-full bg-purple-600 text-white py-2 px-4 rounded hover:bg-purple-700 transition-colors"> Bulk Status Update </button>
      </div>
     </div>
     <div class="bg-white p-6 rounded-lg shadow">
      <h4 class="text-lg font-semibold mb-4">Contact Information</h4>
      <div class="space-y-2 text-sm">
       <p><span class="font-medium">Admin Email:</span> <span id="admin-email-display">admin@codecraftpro.com</span></p>
       <p><span class="font-medium">Admin Phone:</span> <span id="admin-phone-display">+254700000000</span></p>
       <p><span class="font-medium">M-Pesa Paybill:</span> <span id="admin-paybill-display">522533</span></p>
      </div>
     </div>
     <div class="bg-white p-6 rounded-lg shadow">
      <h4 class="text-lg font-semibold mb-4">System Status</h4>
      <div class="space-y-2 text-sm">
       <div class="flex justify-between"><span>Database:</span> <span class="text-green-600 font-medium">Connected</span>
       </div>
       <div class="flex justify-between"><span>Notifications:</span> <span class="text-green-600 font-medium">Active</span>
       </div>
       <div class="flex justify-between"><span>Last Update:</span> <span id="last-update" class="text-gray-600">Just now</span>
       </div>
      </div>
     </div>
    </div><!-- Admin Projects List -->
    <div class="bg-white rounded-lg shadow">
     <div class="px-6 py-4 border-b border-gray-200">
      <h4 class="text-lg font-semibold">All Projects</h4>
     </div>
     <div id="admin-projects-list" class="divide-y divide-gray-200">
      <div class="text-center py-12 text-gray-500">
       <p class="text-lg">No projects to manage</p>
       <p class="text-sm">Projects will appear here when students submit requests</p>
      </div>
     </div>
    </div>
   </div>
  </section><!-- Footer -->
  <footer class="bg-gray-900 text-white py-12">
   <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
     <div>
      <div class="flex items-center space-x-3 mb-4">
       <div class="w-8 h-8 gradient-bg rounded-lg flex items-center justify-center">
        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
        </svg>
       </div><span class="text-xl font-bold">CodeCraft Pro</span>
      </div>
      <p class="text-gray-400">Professional code solutions for IT students. Get custom projects built by expert developers.</p>
     </div>
     <div>
      <h4 class="text-lg font-semibold mb-4">Services</h4>
      <ul class="space-y-2 text-gray-400">
       <li>Frontend Development</li>
       <li>Backend Development</li>
       <li>Database Design</li>
       <li>Full-Stack Solutions</li>
      </ul>
     </div>
     <div>
      <h4 class="text-lg font-semibold mb-4">Contact</h4>
      <div class="space-y-2 text-gray-400">
       <p id="contact-email">support@codecraftpro.com</p>
       <p>Response time: 24 hours</p>
       <p>Available: Mon-Sat, 9 AM - 8 PM</p>
      </div>
     </div>
    </div>
    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
     <p>© 2024 CodeCraft Pro. All rights reserved.</p>
    </div>
   </div>
  </footer>
  <script>
        // Configuration
        const defaultConfig = {
            platform_title: "CodeCraft Pro",
            hero_title: "Professional Code Solutions for IT Students",
            pricing_text: "KSh 1500 per project",
            paybill_number: "522533",
            admin_email: "admin@codecraftpro.com",
            admin_phone: "+254700000000",
            primary_color: "#2563eb",
            surface_color: "#ffffff",
            text_color: "#111827",
            accent_color: "#059669",
            background_color: "#f9fafb",
            font_family: "Inter",
            font_size: 16
        };

        let currentData = [];
        let currentSection = 'hero';

        // Data SDK Handler
        const dataHandler = {
            onDataChanged(data) {
                currentData = data;
                updateProjectsDisplay();
                updateProjectsCount();
            }
        };

        // Elements SDK Implementation
        async function onConfigChange(config) {
            const platformTitle = config.platform_title || defaultConfig.platform_title;
            const heroTitle = config.hero_title || defaultConfig.hero_title;
            const pricingText = config.pricing_text || defaultConfig.pricing_text;
            const paybillNumber = config.paybill_number || defaultConfig.paybill_number;
            const adminEmail = config.admin_email || defaultConfig.admin_email;
            const adminPhone = config.admin_phone || defaultConfig.admin_phone;
            const primaryColor = config.primary_color || defaultConfig.primary_color;
            const surfaceColor = config.surface_color || defaultConfig.surface_color;
            const textColor = config.text_color || defaultConfig.text_color;
            const accentColor = config.accent_color || defaultConfig.accent_color;
            const backgroundColor = config.background_color || defaultConfig.background_color;
            const fontFamily = config.font_family || defaultConfig.font_family;
            const fontSize = config.font_size || defaultConfig.font_size;

            // Update text content
            document.getElementById('platform-title').textContent = platformTitle;
            document.getElementById('hero-title').textContent = heroTitle;
            document.getElementById('pricing-text').textContent = pricingText;
            document.getElementById('paybill-display').textContent = paybillNumber;
            document.getElementById('admin-email-display').textContent = adminEmail;
            document.getElementById('admin-phone-display').textContent = adminPhone;
            document.getElementById('admin-paybill-display').textContent = paybillNumber;

            // Update colors
            document.body.style.backgroundColor = backgroundColor;
            
            // Update surfaces
            const surfaces = document.querySelectorAll('.bg-white');
            surfaces.forEach(surface => {
                surface.style.backgroundColor = surfaceColor;
            });

            // Update primary elements
            const primaryElements = document.querySelectorAll('.bg-blue-600, .text-blue-600, #nav-order, #hero-cta, #submit-order');
            primaryElements.forEach(el => {
                if (el.classList.contains('bg-blue-600')) {
                    el.style.backgroundColor = primaryColor;
                } else {
                    el.style.color = primaryColor;
                }
            });

            // Update text colors
            const textElements = document.querySelectorAll('.text-gray-900, h1, h2, h3, h4');
            textElements.forEach(el => {
                el.style.color = textColor;
            });

            // Update fonts
            const fontStack = `${fontFamily}, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif`;
            document.body.style.fontFamily = fontStack;

            // Update font sizes proportionally
            document.getElementById('platform-title').style.fontSize = `${fontSize * 1.25}px`;
            document.getElementById('hero-title').style.fontSize = `${fontSize * 3.125}px`;
            document.body.style.fontSize = `${fontSize}px`;
        }

        // Initialize SDKs
        async function initializeApp() {
            try {
                // Initialize Data SDK
                const dataResult = await window.dataSdk.init(dataHandler);
                if (!dataResult.isOk) {
                    console.error('Failed to initialize data SDK');
                }

                // Initialize Elements SDK
                if (window.elementSdk) {
                    await window.elementSdk.init({
                        defaultConfig,
                        onConfigChange,
                        mapToCapabilities: (config) => ({
                            recolorables: [
                                {
                                    get: () => config.primary_color || defaultConfig.primary_color,
                                    set: (value) => {
                                        config.primary_color = value;
                                        window.elementSdk.setConfig({ primary_color: value });
                                    }
                                },
                                {
                                    get: () => config.surface_color || defaultConfig.surface_color,
                                    set: (value) => {
                                        config.surface_color = value;
                                        window.elementSdk.setConfig({ surface_color: value });
                                    }
                                },
                                {
                                    get: () => config.text_color || defaultConfig.text_color,
                                    set: (value) => {
                                        config.text_color = value;
                                        window.elementSdk.setConfig({ text_color: value });
                                    }
                                },
                                {
                                    get: () => config.accent_color || defaultConfig.accent_color,
                                    set: (value) => {
                                        config.accent_color = value;
                                        window.elementSdk.setConfig({ accent_color: value });
                                    }
                                },
                                {
                                    get: () => config.background_color || defaultConfig.background_color,
                                    set: (value) => {
                                        config.background_color = value;
                                        window.elementSdk.setConfig({ background_color: value });
                                    }
                                }
                            ],
                            borderables: [],
                            fontEditable: {
                                get: () => config.font_family || defaultConfig.font_family,
                                set: (value) => {
                                    config.font_family = value;
                                    window.elementSdk.setConfig({ font_family: value });
                                }
                            },
                            fontSizeable: {
                                get: () => config.font_size || defaultConfig.font_size,
                                set: (value) => {
                                    config.font_size = value;
                                    window.elementSdk.setConfig({ font_size: value });
                                }
                            }
                        }),
                        mapToEditPanelValues: (config) => new Map([
                            ["platform_title", config.platform_title || defaultConfig.platform_title],
                            ["hero_title", config.hero_title || defaultConfig.hero_title],
                            ["pricing_text", config.pricing_text || defaultConfig.pricing_text],
                            ["paybill_number", config.paybill_number || defaultConfig.paybill_number],
                            ["admin_email", config.admin_email || defaultConfig.admin_email],
                            ["admin_phone", config.admin_phone || defaultConfig.admin_phone]
                        ])
                    });
                }
            } catch (error) {
                console.error('Failed to initialize app:', error);
            }
        }

        // Navigation functions
        function showSection(sectionName) {
            // Hide all sections
            document.getElementById('hero-section').style.display = sectionName === 'hero' ? 'block' : 'none';
            document.getElementById('services-section').style.display = sectionName === 'services' ? 'block' : 'none';
            document.getElementById('order-section').classList.toggle('hidden', sectionName !== 'order');
            document.getElementById('projects-section').classList.toggle('hidden', sectionName !== 'projects');
            document.getElementById('admin-section').classList.toggle('hidden', sectionName !== 'admin');
            
            currentSection = sectionName;
            
            // Update admin dashboard when showing admin section
            if (sectionName === 'admin') {
                updateAdminDashboard();
            }
        }

        // Update projects display
        function updateProjectsDisplay() {
            const projectsList = document.getElementById('projects-list');
            
            if (currentData.length === 0) {
                projectsList.innerHTML = `
                    <div class="text-center py-12 text-gray-500">
                        <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        <p class="text-lg">No projects yet</p>
                        <p class="text-sm">Submit your first project request to get started!</p>
                    </div>
                `;
                return;
            }

            const sortedData = [...currentData].sort((a, b) => new Date(b.created_at) - new Date(a.created_at));
            
            projectsList.innerHTML = sortedData.map(project => `
                <div class="bg-white border border-gray-200 rounded-lg p-6 shadow-sm">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h4 class="text-xl font-semibold text-gray-900 mb-2">${project.project_title}</h4>
                            <p class="text-gray-600 mb-3">${project.project_description}</p>
                        </div>
                        <div class="text-right">
                            <span class="status-${project.project_status.toLowerCase().replace(' ', '-')} px-3 py-1 rounded-full text-sm font-medium">${project.project_status}</span>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm">
                        <div>
                            <span class="text-gray-500">Student:</span>
                            <p class="font-medium">${project.student_name}</p>
                        </div>
                        <div>
                            <span class="text-gray-500">Technologies:</span>
                            <p class="font-medium">${project.technologies || 'Not specified'}</p>
                        </div>
                        <div>
                            <span class="text-gray-500">Deadline:</span>
                            <p class="font-medium">${project.deadline ? new Date(project.deadline).toLocaleDateString() : 'Flexible'}</p>
                        </div>
                        <div>
                            <span class="text-gray-500">Payment:</span>
                            <span class="payment-${project.payment_status.toLowerCase()} px-2 py-1 rounded text-xs font-medium">${project.payment_status}</span>
                        </div>
                    </div>
                    
                    <div class="flex justify-between items-center mt-4 pt-4 border-t border-gray-200">
                        <div class="text-sm text-gray-500">
                            Submitted: ${new Date(project.created_at).toLocaleDateString()}
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="editProject('${project.id}')" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Edit</button>
                            <button onclick="deleteProject('${project.id}')" class="text-red-600 hover:text-red-800 text-sm font-medium">Delete</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Update projects count
        function updateProjectsCount() {
            document.getElementById('total-projects').textContent = currentData.length;
        }

        // Update admin dashboard
        function updateAdminDashboard() {
            const totalProjects = currentData.length;
            const pendingPayment = currentData.filter(p => p.payment_status === 'Pending').length;
            const inProgress = currentData.filter(p => p.project_status === 'In Progress').length;
            
            document.getElementById('admin-total-projects').textContent = totalProjects;
            document.getElementById('admin-pending-payment').textContent = pendingPayment;
            document.getElementById('admin-in-progress').textContent = inProgress;
            document.getElementById('last-update').textContent = new Date().toLocaleTimeString();
            
            updateAdminProjectsList();
        }

        // Update admin projects list
        function updateAdminProjectsList() {
            const adminProjectsList = document.getElementById('admin-projects-list');
            
            if (currentData.length === 0) {
                adminProjectsList.innerHTML = `
                    <div class="text-center py-12 text-gray-500">
                        <p class="text-lg">No projects to manage</p>
                        <p class="text-sm">Projects will appear here when students submit requests</p>
                    </div>
                `;
                return;
            }

            const sortedData = [...currentData].sort((a, b) => new Date(b.created_at) - new Date(a.created_at));
            
            adminProjectsList.innerHTML = sortedData.map(project => `
                <div class="p-6">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex-1">
                            <div class="flex items-center space-x-3 mb-2">
                                <h5 class="text-lg font-semibold text-gray-900">${project.project_title}</h5>
                                <span class="status-${project.project_status.toLowerCase().replace(' ', '-')} px-2 py-1 rounded-full text-xs font-medium">${project.project_status}</span>
                                <span class="payment-${project.payment_status.toLowerCase()} px-2 py-1 rounded-full text-xs font-medium">${project.payment_status}</span>
                            </div>
                            <p class="text-gray-600 mb-3">${project.project_description}</p>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                                <div>
                                    <span class="text-gray-500">Student:</span>
                                    <p class="font-medium">${project.student_name}</p>
                                    <p class="text-xs text-gray-400">${project.student_email}</p>
                                    <p class="text-xs text-gray-400">${project.student_phone}</p>
                                </div>
                                <div>
                                    <span class="text-gray-500">M-Pesa Code:</span>
                                    <p class="font-medium">${project.mpesa_code || 'Not provided'}</p>
                                </div>
                                <div>
                                    <span class="text-gray-500">Technologies:</span>
                                    <p class="font-medium">${project.technologies || 'Not specified'}</p>
                                </div>
                                <div>
                                    <span class="text-gray-500">Deadline:</span>
                                    <p class="font-medium">${project.deadline ? new Date(project.deadline).toLocaleDateString() : 'Flexible'}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex justify-between items-center pt-4 border-t border-gray-200">
                        <div class="text-sm text-gray-500">
                            Submitted: ${new Date(project.created_at).toLocaleString()}
                        </div>
                        <div class="flex space-x-2">
                            <select onchange="updateProjectStatus('${project.id}', this.value)" class="text-sm border border-gray-300 rounded px-2 py-1">
                                <option value="Pending" ${project.project_status === 'Pending' ? 'selected' : ''}>Pending</option>
                                <option value="In Progress" ${project.project_status === 'In Progress' ? 'selected' : ''}>In Progress</option>
                                <option value="Completed" ${project.project_status === 'Completed' ? 'selected' : ''}>Completed</option>
                                <option value="Cancelled" ${project.project_status === 'Cancelled' ? 'selected' : ''}>Cancelled</option>
                            </select>
                            <select onchange="updatePaymentStatus('${project.id}', this.value)" class="text-sm border border-gray-300 rounded px-2 py-1">
                                <option value="Pending" ${project.payment_status === 'Pending' ? 'selected' : ''}>Payment Pending</option>
                                <option value="Paid" ${project.payment_status === 'Paid' ? 'selected' : ''}>Paid</option>
                                <option value="Failed" ${project.payment_status === 'Failed' ? 'selected' : ''}>Failed</option>
                            </select>
                            <button onclick="contactStudent('${project.id}')" class="text-blue-600 hover:text-blue-800 text-sm font-medium px-2 py-1 border border-blue-300 rounded">
                                Contact
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Delete project
        async function deleteProject(id) {
            const project = currentData.find(p => p.id === id);
            if (!project) return;

            // Create inline confirmation
            const projectElement = event.target.closest('.bg-white');
            const originalContent = projectElement.innerHTML;
            
            projectElement.innerHTML = `
                <div class="p-6 text-center">
                    <h4 class="text-lg font-semibold text-gray-900 mb-4">Delete this project?</h4>
                    <p class="text-gray-600 mb-6">This action cannot be undone.</p>
                    <div class="flex justify-center space-x-4">
                        <button onclick="confirmDelete('${id}')" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">Delete</button>
                        <button onclick="cancelDelete(this, \`${originalContent.replace(/`/g, '\\`')}\`)" class="bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400">Cancel</button>
                    </div>
                </div>
            `;
        }

        // Confirm delete
        async function confirmDelete(id) {
            const project = currentData.find(p => p.id === id);
            if (!project) return;

            const result = await window.dataSdk.delete(project);
            if (!result.isOk) {
                showToast('Failed to delete project', 'error');
            } else {
                showToast('Project deleted successfully');
            }
        }

        // Cancel delete
        function cancelDelete(button, originalContent) {
            const projectElement = button.closest('.bg-white');
            projectElement.innerHTML = originalContent;
        }

        // Edit project (placeholder)
        function editProject(id) {
            showToast('Edit functionality coming soon!', 'info');
        }

        // Update project status
        async function updateProjectStatus(id, newStatus) {
            const project = currentData.find(p => p.id === id);
            if (!project) return;

            project.project_status = newStatus;
            project.updated_at = new Date().toISOString();

            const result = await window.dataSdk.update(project);
            if (result.isOk) {
                showToast(`Project status updated to ${newStatus}`);
                // Send notification to admin about status change
                sendAdminNotification(`Project "${project.project_title}" status changed to ${newStatus}`, project);
            } else {
                showToast('Failed to update project status', 'error');
            }
        }

        // Update payment status
        async function updatePaymentStatus(id, newStatus) {
            const project = currentData.find(p => p.id === id);
            if (!project) return;

            project.payment_status = newStatus;
            project.updated_at = new Date().toISOString();

            const result = await window.dataSdk.update(project);
            if (result.isOk) {
                showToast(`Payment status updated to ${newStatus}`);
                // Send notification to admin about payment change
                sendAdminNotification(`Payment for "${project.project_title}" marked as ${newStatus}`, project);
            } else {
                showToast('Failed to update payment status', 'error');
            }
        }

        // Contact student
        function contactStudent(id) {
            const project = currentData.find(p => p.id === id);
            if (!project) return;

            const adminEmail = window.elementSdk?.config?.admin_email || defaultConfig.admin_email;
            const adminPhone = window.elementSdk?.config?.admin_phone || defaultConfig.admin_phone;
            
            // Create contact modal
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white p-6 rounded-lg max-w-md mx-4">
                    <h3 class="text-lg font-semibold mb-4">Contact Student: ${project.student_name}</h3>
                    <div class="space-y-3 text-sm">
                        <div>
                            <span class="font-medium">Email:</span>
                            <a href="mailto:${project.student_email}?subject=CodeCraft Pro - ${project.project_title}" class="text-blue-600 hover:underline block">${project.student_email}</a>
                        </div>
                        <div>
                            <span class="font-medium">Phone:</span>
                            <a href="tel:${project.student_phone}" class="text-blue-600 hover:underline block">${project.student_phone}</a>
                        </div>
                        <div>
                            <span class="font-medium">Project:</span>
                            <p class="text-gray-600">${project.project_title}</p>
                        </div>
                        <div class="pt-3 border-t">
                            <p class="text-xs text-gray-500">Admin Contact: ${adminEmail} | ${adminPhone}</p>
                        </div>
                    </div>
                    <div class="flex justify-end space-x-3 mt-6">
                        <button onclick="this.closest('.fixed').remove()" class="px-4 py-2 text-gray-600 hover:text-gray-800">Close</button>
                        <a href="mailto:${project.student_email}?subject=CodeCraft Pro - ${project.project_title}&body=Hello ${project.student_name},%0A%0ARegarding your project: ${project.project_title}%0A%0A" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Send Email</a>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        // Send admin notification
        function sendAdminNotification(message, project) {
            const adminEmail = window.elementSdk?.config?.admin_email || defaultConfig.admin_email;
            const adminPhone = window.elementSdk?.config?.admin_phone || defaultConfig.admin_phone;
            
            // In a real implementation, this would send actual notifications
            // For now, we'll show a toast with the notification details
            showToast(`Admin notification: ${message}`, 'info');
            
            // Log notification for admin reference
            console.log('Admin Notification:', {
                message,
                project: project.project_title,
                student: project.student_name,
                email: project.student_email,
                phone: project.student_phone,
                adminEmail,
                adminPhone,
                timestamp: new Date().toISOString()
            });
        }

        // Export project data
        function exportProjectData() {
            if (currentData.length === 0) {
                showToast('No project data to export', 'error');
                return;
            }

            const csvContent = [
                ['ID', 'Student Name', 'Email', 'Phone', 'Project Title', 'Description', 'Technologies', 'Deadline', 'Payment Status', 'Project Status', 'M-Pesa Code', 'Created At', 'Budget'].join(','),
                ...currentData.map(project => [
                    project.id,
                    `"${project.student_name}"`,
                    project.student_email,
                    project.student_phone,
                    `"${project.project_title}"`,
                    `"${project.project_description.replace(/"/g, '""')}"`,
                    `"${project.technologies || ''}"`,
                    project.deadline || '',
                    project.payment_status,
                    project.project_status,
                    project.mpesa_code || '',
                    project.created_at,
                    project.budget
                ].join(','))
            ].join('\n');

            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `codecraft-projects-${new Date().toISOString().split('T')[0]}.csv`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            
            showToast('Project data exported successfully!');
        }

        // Show toast message
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            const bgColor = type === 'error' ? 'bg-red-500' : type === 'info' ? 'bg-blue-500' : 'bg-green-500';
            toast.className = `fixed top-4 right-4 ${bgColor} text-white px-6 py-3 rounded-lg z-50 shadow-lg`;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', () => {
            initializeApp();

            // Navigation
            document.getElementById('nav-services').addEventListener('click', () => {
                showSection('services');
            });

            document.getElementById('nav-projects').addEventListener('click', () => {
                showSection('projects');
            });

            document.getElementById('nav-admin').addEventListener('click', () => {
                showSection('admin');
            });

            document.getElementById('nav-order').addEventListener('click', () => {
                showSection('order');
            });

            document.getElementById('hero-cta').addEventListener('click', () => {
                showSection('order');
            });

            // Order form submission
            document.getElementById('order-form').addEventListener('submit', async (e) => {
                e.preventDefault();

                if (currentData.length >= 999) {
                    showToast('Maximum limit of 999 projects reached. Please delete some projects first.', 'error');
                    return;
                }

                const submitBtn = document.getElementById('submit-order');
                const originalText = submitBtn.textContent;
                submitBtn.textContent = 'Submitting...';
                submitBtn.disabled = true;

                const formData = {
                    id: Date.now().toString(),
                    student_name: document.getElementById('student-name').value,
                    student_email: document.getElementById('student-email').value,
                    student_phone: document.getElementById('student-phone').value,
                    project_title: document.getElementById('project-title').value,
                    project_description: document.getElementById('project-description').value,
                    technologies: document.getElementById('technologies').value,
                    deadline: document.getElementById('deadline').value,
                    mpesa_code: document.getElementById('mpesa-code').value,
                    payment_status: 'Pending',
                    project_status: 'Pending',
                    admin_notes: '',
                    priority: 'Normal',
                    created_at: new Date().toISOString(),
                    updated_at: new Date().toISOString(),
                    budget: 1500
                };

                const result = await window.dataSdk.create(formData);

                if (result.isOk) {
                    showToast('Project request submitted successfully!');
                    document.getElementById('order-form').reset();
                    
                    // Send admin notification about new project
                    sendAdminNotification(`New project submitted: "${formData.project_title}" by ${formData.student_name}`, formData);
                    
                    showSection('projects');
                } else {
                    showToast('Failed to submit project request', 'error');
                }

                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            });

            // Set minimum date to today
            const deadlineInput = document.getElementById('deadline');
            const today = new Date().toISOString().split('T')[0];
            deadlineInput.min = today;

            // Admin panel event listeners
            document.getElementById('notify-admin').addEventListener('click', () => {
                const adminEmail = window.elementSdk?.config?.admin_email || defaultConfig.admin_email;
                const adminPhone = window.elementSdk?.config?.admin_phone || defaultConfig.admin_phone;
                
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                modal.innerHTML = `
                    <div class="bg-white p-6 rounded-lg max-w-md mx-4">
                        <h3 class="text-lg font-semibold mb-4">Admin Notification System</h3>
                        <div class="space-y-3 text-sm">
                            <p>New project notifications will be sent to:</p>
                            <div class="bg-gray-50 p-3 rounded">
                                <p><strong>Email:</strong> ${adminEmail}</p>
                                <p><strong>Phone:</strong> ${adminPhone}</p>
                            </div>
                            <p class="text-gray-600">Notifications are automatically sent when:</p>
                            <ul class="list-disc list-inside text-gray-600 space-y-1">
                                <li>New project is submitted</li>
                                <li>Payment status changes</li>
                                <li>Project status is updated</li>
                            </ul>
                        </div>
                        <div class="flex justify-end space-x-3 mt-6">
                            <button onclick="this.closest('.fixed').remove()" class="px-4 py-2 text-gray-600 hover:text-gray-800">Close</button>
                        </div>
                    </div>
                `;
                document.body.appendChild(modal);
            });

            document.getElementById('export-projects').addEventListener('click', exportProjectData);

            document.getElementById('bulk-update').addEventListener('click', () => {
                showToast('Bulk update feature coming soon!', 'info');
            });
        });

        // Make functions globally available
        window.deleteProject = deleteProject;
        window.editProject = editProject;
        window.confirmDelete = confirmDelete;
        window.cancelDelete = cancelDelete;
        window.updateProjectStatus = updateProjectStatus;
        window.updatePaymentStatus = updatePaymentStatus;
        window.contactStudent = contactStudent;
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9951a88ce6678a6b',t:'MTc2MTU2MjQ5OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>